
include ../Makefile.common

top_srcdir = @top_srcdir@
prefix = @prefix@
VERSION = @PACKAGE_VERSION@
DIR = $(prefix)/lib/yog/$(VERSION)
SOEXT = @SOEXT@
CC = @CC@
SO = $(top_srcdir)/ext/uname.$(SOEXT)

.PHONY: all clean distclean maintainer-clean install

all: $(SO)

$(SO): uname.c
	$(CC) $(CFLAGS) -shared -O2 -Wall -o $@ uname.c @LIBS@

clean: 
	rm -f $(SO)

distclean: 
	rm -f $(SO)
	rm -f Makefile

maintainer-clean: 
	rm -f $(SO)
	rm -f Makefile

install:
	mkdir -p $(DIR)
	$(install_sh_DATA) $(SO) $(DIR)

Makefile: Makefile.in
	cd $(top_srcdir) && ./config.status ext/uname/$@

# vim: tabstop=8 shiftwidth=8 noexpandtab filetype=automake
