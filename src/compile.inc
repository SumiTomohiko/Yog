/**
 * This file was generated by "tools/inst.py src/insts.def" automatically.
 * DO NOT TOUCH!!
 */


static void 
CompileData_add_load_special(YogEnv* env, CompileData* data, ID id)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(LOAD_SPECIAL);

    LOAD_SPECIAL_ID(inst) = id;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_pop(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(POP);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_push_const(YogEnv* env, CompileData* data, uint8_t index)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(PUSH_CONST);

    PUSH_CONST_INDEX(inst) = index;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_call_method(YogEnv* env, CompileData* data, ID method, uint8_t argc, uint8_t kwargc, uint8_t blockargc, uint8_t varargc, uint8_t varkwargc)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(CALL_METHOD);

    CALL_METHOD_METHOD(inst) = method;
    CALL_METHOD_ARGC(inst) = argc;
    CALL_METHOD_KWARGC(inst) = kwargc;
    CALL_METHOD_BLOCKARGC(inst) = blockargc;
    CALL_METHOD_VARARGC(inst) = varargc;
    CALL_METHOD_VARKWARGC(inst) = varkwargc;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_store_name(YogEnv* env, CompileData* data, ID id)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(STORE_NAME);

    STORE_NAME_ID(inst) = id;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_store_local(YogEnv* env, CompileData* data, uint8_t index)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(STORE_LOCAL);

    STORE_LOCAL_INDEX(inst) = index;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_call_command(YogEnv* env, CompileData* data, ID command, uint8_t argc, uint8_t kwargc, uint8_t blockargc, uint8_t varargc, uint8_t varkwargc)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(CALL_COMMAND);

    CALL_COMMAND_COMMAND(inst) = command;
    CALL_COMMAND_ARGC(inst) = argc;
    CALL_COMMAND_KWARGC(inst) = kwargc;
    CALL_COMMAND_BLOCKARGC(inst) = blockargc;
    CALL_COMMAND_VARARGC(inst) = varargc;
    CALL_COMMAND_VARKWARGC(inst) = varkwargc;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_make_package_method(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(MAKE_PACKAGE_METHOD);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_call_function(YogEnv* env, CompileData* data, uint8_t argc, uint8_t kwargc, uint8_t blockargc, uint8_t varargc, uint8_t varkwargc)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(CALL_FUNCTION);

    CALL_FUNCTION_ARGC(inst) = argc;
    CALL_FUNCTION_KWARGC(inst) = kwargc;
    CALL_FUNCTION_BLOCKARGC(inst) = blockargc;
    CALL_FUNCTION_VARARGC(inst) = varargc;
    CALL_FUNCTION_VARKWARGC(inst) = varkwargc;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_load_name(YogEnv* env, CompileData* data, ID id)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(LOAD_NAME);

    LOAD_NAME_ID(inst) = id;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_load_local(YogEnv* env, CompileData* data, uint8_t index)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(LOAD_LOCAL);

    LOAD_LOCAL_INDEX(inst) = index;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_jump(YogEnv* env, CompileData* data, struct YogInst* dest)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(JUMP);

    JUMP_DEST(inst) = dest;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_jump_if_false(YogEnv* env, CompileData* data, struct YogInst* dest)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(JUMP_IF_FALSE);

    JUMP_IF_FALSE_DEST(inst) = dest;

    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_dup(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(DUP);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_make_package_block(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(MAKE_PACKAGE_BLOCK);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_make_klass(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(MAKE_KLASS);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_make_method(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(MAKE_METHOD);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_push_self_name(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(PUSH_SELF_NAME);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}

static void 
CompileData_add_ret(YogEnv* env, CompileData* data)
{
    YogInst* inst = Inst_new(env);
    inst->type = INST_OP;
    INST_OPCODE(inst) = OP(RET);


    add_inst(data, inst);

    data->pc += Yog_get_inst_size(INST_OPCODE(inst));
}


static YogBinary* 
insts2bin(YogEnv* env, YogInst* inst) 
{
#define INIT_BIN_SIZE   (0)
    YogBinary* code = YogBinary_new(env, INIT_BIN_SIZE);
#undef INIT_BIN_SIZE

    while (inst != NULL) {
        switch (inst->type) {
            case INST_OP:
                {
                    switch (INST_OPCODE(inst)) {

                        case OP(LOAD_SPECIAL):
                            {
                                YogBinary_push_uint8(env, code, OP(LOAD_SPECIAL));
                                YogBinary_push_id(env, code, LOAD_SPECIAL_ID(inst));
                                break;
                            }
                        case OP(POP):
                            {
                                YogBinary_push_uint8(env, code, OP(POP));
                                break;
                            }
                        case OP(PUSH_CONST):
                            {
                                YogBinary_push_uint8(env, code, OP(PUSH_CONST));
                                YogBinary_push_uint8(env, code, PUSH_CONST_INDEX(inst));
                                break;
                            }
                        case OP(CALL_METHOD):
                            {
                                YogBinary_push_uint8(env, code, OP(CALL_METHOD));
                                YogBinary_push_id(env, code, CALL_METHOD_METHOD(inst));
                                YogBinary_push_uint8(env, code, CALL_METHOD_ARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_METHOD_KWARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_METHOD_BLOCKARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_METHOD_VARARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_METHOD_VARKWARGC(inst));
                                break;
                            }
                        case OP(STORE_NAME):
                            {
                                YogBinary_push_uint8(env, code, OP(STORE_NAME));
                                YogBinary_push_id(env, code, STORE_NAME_ID(inst));
                                break;
                            }
                        case OP(STORE_LOCAL):
                            {
                                YogBinary_push_uint8(env, code, OP(STORE_LOCAL));
                                YogBinary_push_uint8(env, code, STORE_LOCAL_INDEX(inst));
                                break;
                            }
                        case OP(CALL_COMMAND):
                            {
                                YogBinary_push_uint8(env, code, OP(CALL_COMMAND));
                                YogBinary_push_id(env, code, CALL_COMMAND_COMMAND(inst));
                                YogBinary_push_uint8(env, code, CALL_COMMAND_ARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_COMMAND_KWARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_COMMAND_BLOCKARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_COMMAND_VARARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_COMMAND_VARKWARGC(inst));
                                break;
                            }
                        case OP(MAKE_PACKAGE_METHOD):
                            {
                                YogBinary_push_uint8(env, code, OP(MAKE_PACKAGE_METHOD));
                                break;
                            }
                        case OP(CALL_FUNCTION):
                            {
                                YogBinary_push_uint8(env, code, OP(CALL_FUNCTION));
                                YogBinary_push_uint8(env, code, CALL_FUNCTION_ARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_FUNCTION_KWARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_FUNCTION_BLOCKARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_FUNCTION_VARARGC(inst));
                                YogBinary_push_uint8(env, code, CALL_FUNCTION_VARKWARGC(inst));
                                break;
                            }
                        case OP(LOAD_NAME):
                            {
                                YogBinary_push_uint8(env, code, OP(LOAD_NAME));
                                YogBinary_push_id(env, code, LOAD_NAME_ID(inst));
                                break;
                            }
                        case OP(LOAD_LOCAL):
                            {
                                YogBinary_push_uint8(env, code, OP(LOAD_LOCAL));
                                YogBinary_push_uint8(env, code, LOAD_LOCAL_INDEX(inst));
                                break;
                            }
                        case OP(JUMP):
                            {
                                YogBinary_push_uint8(env, code, OP(JUMP));
                                YogBinary_push_pc(env, code, LABEL_POS(JUMP_DEST(inst)));
                                break;
                            }
                        case OP(JUMP_IF_FALSE):
                            {
                                YogBinary_push_uint8(env, code, OP(JUMP_IF_FALSE));
                                YogBinary_push_pc(env, code, LABEL_POS(JUMP_IF_FALSE_DEST(inst)));
                                break;
                            }
                        case OP(DUP):
                            {
                                YogBinary_push_uint8(env, code, OP(DUP));
                                break;
                            }
                        case OP(MAKE_PACKAGE_BLOCK):
                            {
                                YogBinary_push_uint8(env, code, OP(MAKE_PACKAGE_BLOCK));
                                break;
                            }
                        case OP(MAKE_KLASS):
                            {
                                YogBinary_push_uint8(env, code, OP(MAKE_KLASS));
                                break;
                            }
                        case OP(MAKE_METHOD):
                            {
                                YogBinary_push_uint8(env, code, OP(MAKE_METHOD));
                                break;
                            }
                        case OP(PUSH_SELF_NAME):
                            {
                                YogBinary_push_uint8(env, code, OP(PUSH_SELF_NAME));
                                break;
                            }
                        case OP(RET):
                            {
                                YogBinary_push_uint8(env, code, OP(RET));
                                break;
                            }
                    default:
                        Yog_assert(env, FALSE, "Unkown instruction.");
                    break;
                }
            }
            case INST_ANCHOR:
            case INST_LABEL:
                break;
            default:
                Yog_assert(env, FALSE, "Unknown inst type.");
                break;
        }

        inst = inst->next;
    }

    return code;
}

/**
 * vim: tabstop=4 shiftwidth=4 expandtab softtabstop=4 filetype=c
 */
